(()=>{var e={};e.id=318,e.ids=[318],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4088:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=a(8090),t=a(9409),o=a(1522),i=a.n(o),n=a(1305),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(s,l);let d=["",{children:["(dashboard)",{children:["workflows",{children:["[id]",{children:["editor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1631)),"C:\\dev\\Creatye v2\\apps\\web\\src\\app\\(dashboard)\\workflows\\[id]\\editor\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2506)),"C:\\dev\\Creatye v2\\apps\\web\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,111,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,3840)),"C:\\dev\\Creatye v2\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,111,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\dev\\Creatye v2\\apps\\web\\src\\app\\(dashboard)\\workflows\\[id]\\editor\\page.tsx"],p="/(dashboard)/workflows/[id]/editor/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(dashboard)/workflows/[id]/editor/page",pathname:"/workflows/[id]/editor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4472:(e,s,a)=>{Promise.resolve().then(a.bind(a,5602))},5602:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var r=a(4297),t=a(5803),o=a(3776),i=a(6858),n=a(2984),l=a(7952);let d=t.forwardRef(({className:e,...s},a)=>r.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));d.displayName="Textarea";var c=a(1584),p=a(2538),u=a(2377);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,a(5079).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function m(){let{id:e}=(0,o.useParams)(),[s,a]=(0,t.useState)(!0),[l,m]=(0,t.useState)(!1),[f,g]=(0,t.useState)(null),[h,b]=(0,t.useState)([]),[v,y]=(0,t.useState)([]);(0,o.useRouter)(),(0,t.useEffect)(()=>{w()},[e]);let w=async()=>{let s=await fetch(`/api/workflows/${e}`);if(s.ok){let e=await s.json();g(e.workflow),b(e.triggers.map(e=>(Array.isArray(e.configJson.keywords)&&(e.configJson.keywords=e.configJson.keywords.join(", ")),e))),y(e.actions)}a(!1)},j=async(s=!1)=>{m(!0);try{let a=h.map(e=>{let s=JSON.parse(JSON.stringify(e));return"string"==typeof s.configJson.keywords?s.configJson.keywords=s.configJson.keywords.split(",").map(e=>e.trim()).filter(e=>""!==e):s.configJson.keywords||(s.configJson.keywords=[]),s});if(!(await fetch(`/api/workflows/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({workflow:{status:s?"PUBLISHED":f.status},triggers:a,actions:v})})).ok)throw Error("Erro ao salvar");u.Am.success(s?"Automa\xe7\xe3o Publicada!":"Salvo com sucesso!"),s&&g({...f,status:"PUBLISHED"})}catch(e){u.Am.error("Erro ao salvar")}finally{m(!1)}};return s?r.jsx("div",{children:"Carregando editor..."}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-2xl font-bold",children:f.title}),r.jsx(p.C,{variant:"PUBLISHED"===f.status?"success":"secondary",children:"PUBLISHED"===f.status?"Publicado":"Rascunho"})]}),r.jsx("p",{className:"text-muted-foreground",children:f.description})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(i.z,{variant:"outline",onClick:()=>j(!1),disabled:l,children:[r.jsx(x,{className:"w-4 h-4 mr-2"})," Salvar Rascunho"]}),r.jsx(i.z,{onClick:()=>j(!0),disabled:l,className:"PUBLISHED"===f.status?"bg-amber-600 hover:bg-amber-700":"",children:"PUBLISHED"===f.status?"Atualizar Publica\xe7\xe3o":"Publicar"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Gatilhos (Quando acontecer...)"}),h.map((e,s)=>(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{className:"pb-2",children:r.jsx(c.ll,{className:"text-base uppercase tracking-wide text-xs text-muted-foreground font-bold",children:"DM_RECEIVED"===e.type?"Mensagem Direta":"STORY_REPLY"===e.type?"Resposta ao Story":"Coment\xe1rio no Feed"})}),(0,r.jsxs)(c.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Modo de Correspond\xeancia"}),(0,r.jsxs)("select",{className:"text-sm border rounded p-1",value:e.configJson.matchMode,onChange:e=>{let a=[...h];a[s].configJson.matchMode=e.target.value,b(a)},children:[r.jsx("option",{value:"contains",children:"Cont\xe9m (Parcial)"}),r.jsx("option",{value:"exact",children:"Exato"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Palavras-chave (separadas por v\xedrgula)"}),r.jsx(n.I,{placeholder:"Ex: pre\xe7o, valor, comprar",value:e.configJson.keywords||"",onChange:e=>{let a=e.target.value,r=[...h];r[s].configJson.keywords=a,b(r)}}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Deixe vazio para responder a TUDO."})]})]})]},e.id))]}),(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"A\xe7\xe3o (Fa\xe7a isso...)"}),v.map((e,s)=>(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{className:"pb-2",children:r.jsx(c.ll,{className:"text-base uppercase tracking-wide text-xs text-muted-foreground font-bold",children:"Enviar Resposta"})}),r.jsx(c.aY,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Mensagem de Resposta"}),r.jsx(d,{className:"min-h-[150px]",placeholder:"Ol\xe1! Tudo bem?",value:e.configJson.replyMessage||"",onChange:e=>{let a=[...v];a[s].configJson.replyMessage=e.target.value,y(a)}}),(0,r.jsxs)("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[r.jsx("span",{children:"Vari\xe1veis dispon\xedveis:"}),r.jsx(p.C,{variant:"outline",className:"cursor-pointer",children:"{nome}"})]})]})})]},e.id))]})]})]})}},2984:(e,s,a)=>{"use strict";a.d(s,{I:()=>i});var r=a(4297),t=a(5803),o=a(7952);let i=t.forwardRef(({className:e,type:s,...a},t)=>r.jsx("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));i.displayName="Input"},1631:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>o,__esModule:()=>t,default:()=>i});let r=(0,a(7460).createProxy)(String.raw`C:\dev\Creatye v2\apps\web\src\app\(dashboard)\workflows\[id]\editor\page.tsx`),{__esModule:t,$$typeof:o}=r,i=r.default}};var s=require("../../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[150,235,809,769],()=>a(4088));module.exports=r})();