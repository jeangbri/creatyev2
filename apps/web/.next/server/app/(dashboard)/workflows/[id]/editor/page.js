(()=>{var e={};e.id=318,e.ids=[318],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4088:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=a(8090),r=a(9409),o=a(1522),i=a.n(o),n=a(1305),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(s,l);let d=["",{children:["(dashboard)",{children:["workflows",{children:["[id]",{children:["editor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1631)),"C:\\dev\\Creatye v2\\apps\\web\\src\\app\\(dashboard)\\workflows\\[id]\\editor\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2506)),"C:\\dev\\Creatye v2\\apps\\web\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,111,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,3840)),"C:\\dev\\Creatye v2\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,111,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\dev\\Creatye v2\\apps\\web\\src\\app\\(dashboard)\\workflows\\[id]\\editor\\page.tsx"],u="/(dashboard)/workflows/[id]/editor/page",p={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/workflows/[id]/editor/page",pathname:"/workflows/[id]/editor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4472:(e,s,a)=>{Promise.resolve().then(a.bind(a,5602))},5602:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var t=a(4297),r=a(5803),o=a(3776),i=a(6858),n=a(2984),l=a(7952);let d=r.forwardRef(({className:e,...s},a)=>t.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));d.displayName="Textarea";var c=a(1584),u=a(2538),p=a(2377);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,a(5079).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function m(){let{id:e}=(0,o.useParams)(),[s,a]=(0,r.useState)(!0),[l,m]=(0,r.useState)(!1),[f,h]=(0,r.useState)(null),[g,b]=(0,r.useState)([]),[v,y]=(0,r.useState)([]);(0,o.useRouter)(),(0,r.useEffect)(()=>{j()},[e]);let j=async()=>{let s=await fetch(`/api/workflows/${e}`);if(s.ok){let e=await s.json();h(e.workflow),b(e.triggers),y(e.actions)}a(!1)},w=async(s=!1)=>{m(!0);try{if(!(await fetch(`/api/workflows/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({workflow:{status:s?"PUBLISHED":f.status},triggers:g,actions:v})})).ok)throw Error("Erro ao salvar");p.Am.success(s?"Automa\xe7\xe3o Publicada!":"Salvo com sucesso!"),j()}catch(e){p.Am.error("Erro ao salvar")}finally{m(!1)}};return s?t.jsx("div",{children:"Carregando editor..."}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("h2",{className:"text-2xl font-bold",children:f.title}),t.jsx(u.C,{variant:"PUBLISHED"===f.status?"success":"secondary",children:"PUBLISHED"===f.status?"Publicado":"Rascunho"})]}),t.jsx("p",{className:"text-muted-foreground",children:f.description})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.z,{variant:"outline",onClick:()=>w(!1),disabled:l,children:[t.jsx(x,{className:"w-4 h-4 mr-2"})," Salvar Rascunho"]}),t.jsx(i.z,{onClick:()=>w(!0),disabled:l,className:"PUBLISHED"===f.status?"bg-amber-600 hover:bg-amber-700":"",children:"PUBLISHED"===f.status?"Atualizar Publica\xe7\xe3o":"Publicar"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Gatilhos (Quando acontecer...)"}),g.map((e,s)=>(0,t.jsxs)(c.Zb,{children:[t.jsx(c.Ol,{className:"pb-2",children:t.jsx(c.ll,{className:"text-base uppercase tracking-wide text-xs text-muted-foreground font-bold",children:"DM_RECEIVED"===e.type?"Mensagem Direta":"STORY_REPLY"===e.type?"Resposta ao Story":"Coment\xe1rio no Feed"})}),(0,t.jsxs)(c.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium",children:"Modo de Correspond\xeancia"}),(0,t.jsxs)("select",{className:"text-sm border rounded p-1",value:e.configJson.matchMode,onChange:e=>{let a=[...g];a[s].configJson.matchMode=e.target.value,b(a)},children:[t.jsx("option",{value:"contains",children:"Cont\xe9m (Parcial)"}),t.jsx("option",{value:"exact",children:"Exato"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Palavras-chave (separadas por v\xedrgula)"}),t.jsx(n.I,{placeholder:"Ex: pre\xe7o, valor, comprar",value:(e.configJson.keywords||[]).join(", "),onChange:e=>{let a=e.target.value.split(",").map(e=>e.trim()).filter(Boolean);[...g][s].configJson.keywords=a}}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Deixe vazio para responder a TUDO."})]})]})]},e.id))]}),(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"A\xe7\xe3o (Fa\xe7a isso...)"}),v.map((e,s)=>(0,t.jsxs)(c.Zb,{children:[t.jsx(c.Ol,{className:"pb-2",children:t.jsx(c.ll,{className:"text-base uppercase tracking-wide text-xs text-muted-foreground font-bold",children:"Enviar Resposta"})}),t.jsx(c.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Mensagem de Resposta"}),t.jsx(d,{className:"min-h-[150px]",placeholder:"Ol\xe1! Tudo bem?",value:e.configJson.replyMessage||"",onChange:e=>{let a=[...v];a[s].configJson.replyMessage=e.target.value,y(a)}}),(0,t.jsxs)("div",{className:"flex gap-2 text-xs text-muted-foreground",children:[t.jsx("span",{children:"Vari\xe1veis dispon\xedveis:"}),t.jsx(u.C,{variant:"outline",className:"cursor-pointer",children:"{nome}"})]})]})})]},e.id))]})]})]})}},2984:(e,s,a)=>{"use strict";a.d(s,{I:()=>i});var t=a(4297),r=a(5803),o=a(7952);let i=r.forwardRef(({className:e,type:s,...a},r)=>t.jsx("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},1631:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>o,__esModule:()=>r,default:()=>i});let t=(0,a(7460).createProxy)(String.raw`C:\dev\Creatye v2\apps\web\src\app\(dashboard)\workflows\[id]\editor\page.tsx`),{__esModule:r,$$typeof:o}=t,i=t.default}};var s=require("../../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[150,235,809,769],()=>a(4088));module.exports=t})();